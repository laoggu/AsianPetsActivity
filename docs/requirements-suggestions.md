# 需求文档完善建议

基于对《亚宠会小程序产品需求文档 (PRD)》的分析，结合已开发的后端API，提出以下完善建议：

---

## 一、需求补充建议

### 1. 会员管理模块

#### 1.1 会员信息字段补充
| 需求点 | 现状 | 建议 | 优先级 |
|--------|------|------|--------|
| 会员编号生成规则 | 仅提到"系统生成" | 明确规则：APM{年份}{4位序号}，如APM20240001 | ⭐⭐⭐ |
| 会员有效期管理 | 有"到期时间"字段 | 增加续费提醒机制（到期前30/15/7天提醒） | ⭐⭐⭐ |
| 会员等级升级 | 未明确说明 | 增加升级条件和流程：累计消费/参与活动次数等 | ⭐⭐ |
| 会员标签 | 未提及 | 增加标签系统（如"活跃用户"、"VIP客户"等） | ⭐⭐ |

#### 1.2 审核流程细化
```
建议审核状态流转：
PENDING(待审核) → [APPROVED(已通过) / REJECTED(已拒绝) / SUPPLEMENT(待补充)]
                    ↓
              WAITING_PAYMENT(待付费) → PAID(已付费) → NORMAL(正常)
```

#### 1.3 补充需求
1. **会员续费管理**
   - 续费通知功能
   - 续费记录查询
   - 续费优惠策略

2. **会员变更记录**
   - 企业信息变更日志
   - 联系人变更历史
   - 等级变更记录

---

### 2. 活动管理模块

#### 2.1 活动字段补充
| 需求点 | 现状 | 建议 | 优先级 |
|--------|------|------|--------|
| 活动费用明细 | 仅"费用标准" | 增加费用明细：早鸟价、团体价、会员等级折扣 | ⭐⭐⭐ |
| 活动名额管理 | "人数限制" | 增加候补名单功能 | ⭐⭐ |
| 活动评价 | "满意度调查" | 增加评价维度：内容/组织/讲师/场地 | ⭐⭐ |
| 活动资料 | "演讲PPT/活动照片" | 明确资料上传权限和有效期 | ⭐⭐ |

#### 2.2 签到功能细化
建议增加签到方式：
1. 二维码签到（现场扫码）
2. 地理位置签到（GPS范围校验）
3. 口令签到（输入活动口令）
4. 手动签到（管理员代签）

#### 2.3 补充需求
1. **活动提醒机制**
   - 报名成功提醒
   - 活动开始前24小时提醒
   - 活动开始前1小时提醒

2. **活动推荐**
   - 基于会员业务范畴的智能推荐
   - 基于历史参与记录的推荐

---

### 3. 蓝皮书管理模块

#### 3.1 权限控制细化
| 需求点 | 现状 | 建议 | 优先级 |
|--------|------|------|--------|
| 在线阅读 | 未提及 | 增加在线预览功能（PDF.js） | ⭐⭐⭐ |
| 下载次数限制 | "限制下载次数" | 明确限制规则：每月/每年/总量 | ⭐⭐⭐ |
| 水印功能 | "添加水印" | 明确水印内容：会员编号+姓名/公司名称 | ⭐⭐ |
| 下载记录 | "下载记录追踪" | 增加下载行为分析报表 | ⭐ |

#### 3.2 补充需求
1. **蓝皮书分类**
   - 按年度分类
   - 按主题分类（行业报告/白皮书/年鉴）

2. **蓝皮书反馈**
   - 阅读反馈收集
   - 内容建议收集

---

### 4. 消息推送模块

#### 4.1 推送渠道细化
| 渠道 | 当前支持 | 建议 | 优先级 |
|------|----------|------|--------|
| 站内信 | ✅ | 增加消息分类和优先级 | ⭐⭐⭐ |
| 微信模板消息 | ⚠️ | 需申请模板ID，明确可发送场景 | ⭐⭐⭐ |
| 短信通知 | ⚠️ | 明确使用场景（仅重要通知） | ⭐⭐ |
| 邮件通知 | ⚠️ | 增加邮件模板管理 | ⭐⭐ |

#### 4.2 推送策略细化
```
建议推送策略：
1. 即时推送：审核结果、活动提醒
2. 定时推送：活动预告、月度资讯
3. 触发式推送：会员到期提醒、生日祝福
4. 批量推送：系统公告、蓝皮书发布
```

#### 4.3 补充需求
1. **消息模板管理**
   - 模板创建/编辑
   - 变量管理（{{会员名称}}、{{活动名称}}等）
   - 模板审核

2. **推送效果分析**
   - 送达率统计
   - 打开率统计
   - 点击率统计
   - 转化率统计

---

### 5. 数据统计模块

#### 5.1 数据指标补充
| 指标类型 | 当前指标 | 建议补充 | 优先级 |
|----------|----------|----------|--------|
| 会员指标 | 总数/增长趋势 | 活跃度、留存率、流失率 | ⭐⭐⭐ |
| 活动指标 | 参与率 | 报名转化率、现场出席率、满意度 | ⭐⭐⭐ |
| 内容指标 | 触达率 | 蓝皮书阅读率、公告点击率 | ⭐⭐ |
| 商业指标 | 续费率 | LTV(客户生命周期价值)、获客成本 | ⭐⭐ |

#### 5.2 报表功能建议
1. **日报/周报/月报**
   - 自动生成运营报表
   - 支持邮件订阅

2. **自定义报表**
   - 拖拽式报表设计
   - 支持导出Excel/PDF

3. **数据大屏**
   - 实时数据展示
   - 关键指标监控

---

### 6. 权限管理模块

#### 6.1 角色权限细化
| 角色 | 当前权限 | 建议细化 | 优先级 |
|------|----------|----------|--------|
| 超级管理员 | 全部权限 | 增加数据导出、系统配置权限 | ⭐⭐⭐ |
| 内容管理员 | 蓝皮书发布 | 增加公告发布、内容审核 | ⭐⭐⭐ |
| 会员管理员 | 会员审核/管理 | 细化：查看/编辑/删除/导出 | ⭐⭐⭐ |
| 活动管理员 | 活动创建/报名管理 | 增加签到管理、活动数据分析 | ⭐⭐⭐ |

#### 6.2 补充需求
1. **数据权限**
   - 按部门隔离数据
   - 按区域隔离数据

2. **操作权限**
   - 敏感操作二次确认
   - 批量操作权限控制

---

## 二、技术实现建议

### 1. 数据库优化
```sql
-- 建议添加的索引
CREATE INDEX idx_member_business_scope ON member(business_scope);
CREATE INDEX idx_member_province_city ON member(province, city);
CREATE INDEX idx_activity_status_time ON activity(status, start_time);
CREATE INDEX idx_signup_member_activity ON activity_signup(member_id, activity_id);
```

### 2. 缓存策略
| 数据类型 | 建议缓存方案 | 过期时间 |
|----------|--------------|----------|
| 会员信息 | Redis | 1小时 |
| 系统配置 | Redis | 24小时 |
| 会员权益 | 本地缓存 | 1小时 |
| 活动列表 | Redis | 5分钟 |

### 3. 接口性能优化
1. **分页优化**：大数据量分页使用游标方式
2. **批量操作**：支持批量导入/导出
3. **异步处理**：消息推送使用MQ异步处理

---

## 三、安全建议

### 1. 数据安全
| 安全项 | 建议措施 |
|--------|----------|
| 敏感数据加密 | 手机号、身份证号等使用AES加密存储 |
| 密码安全 | 使用BCrypt加密，强制密码复杂度 |
| 接口安全 | JWT Token + 接口签名验证 |
| 数据脱敏 | 日志中敏感信息脱敏显示 |

### 2. 访问控制
1. **接口限流**：防止恶意请求
2. **IP白名单**：管理后台访问限制
3. **操作审计**：关键操作记录完整日志

---

## 四、用户体验建议

### 1. 小程序端优化
| 优化项 | 具体建议 |
|--------|----------|
| 首页加载 | 骨架屏 + 懒加载 |
| 表单填写 | 自动保存草稿 |
| 消息通知 | 红点提醒 + 数字角标 |
| 离线支持 | 关键页面支持离线浏览 |

### 2. 管理后台优化
1. **快捷操作**：常用功能快捷入口
2. **数据筛选**：多维度筛选 + 筛选条件保存
3. **批量操作**：支持批量审核、批量发送消息
4. **操作引导**：新功能引导提示

---

## 五、后续迭代建议

### Phase 1 (1-2个月)
- [ ] 完善会员续费管理
- [ ] 增加活动评价功能
- [ ] 优化消息推送模板
- [ ] 完善数据报表

### Phase 2 (2-3个月)
- [ ] 增加会员推荐系统
- [ ] 增加积分商城
- [ ] 增加在线支付功能
- [ ] 增加API开放接口

### Phase 3 (3-6个月)
- [ ] 增加AI智能客服
- [ ] 增加数据分析预测
- [ ] 支持多语言版本
- [ ] 支持多端适配（APP/H5）

---

## 六、文档规范建议

### 1. API文档
- 使用Swagger/OpenAPI自动生成文档
- 包含接口示例、错误码说明
- 定期同步更新

### 2. 数据库文档
- 表结构变更需同步更新数据字典
- 重要字段变更需评估影响范围
- 保留历史版本记录

### 3. 产品文档
- 功能上线后更新PRD
- 用户操作手册随功能发布
- 定期收集用户反馈并更新

---

## 总结

以上建议基于当前已开发的API和完整的需求分析，建议按优先级逐步完善。核心建议：

1. **高优先级**：会员续费、消息推送渠道对接、数据报表完善
2. **中优先级**：活动评价、蓝皮书在线预览、权限细化
3. **低优先级**：AI客服、多语言支持、开放API

如需针对某个模块进行详细讨论，请随时告知。
